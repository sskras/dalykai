URL: https://www.oracle.com/technical-resources/articles/it-infrastructure/admin-manage-vbox-cli.html#4

```
[p@localhost ~]$ VBoxManage list vms 
"ReOS CORE-11440 test" {981e5981-7416-437e-ad44-382f0b28f3d2}
"<inaccessible>" {0953c108-02fa-434f-b550-79d3af0c9a91}
"ping" {6d7ca61d-6bc0-46ff-a119-8eea7a7d517e}
```

```
[p@localhost ~]$ VBoxManage list vms -l 
Name:                        ReOS CORE-11440 test
Groups:                      /
Guest OS:                    Windows 2003 (32-bit)
UUID:                        981e5981-7416-437e-ad44-382f0b28f3d2
Config file:                 /home/p/VirtualBox VMs/ReOS CORE-11440 test/ReOS CORE-11440 test.vbox
Snapshot folder:             /home/p/VirtualBox VMs/ReOS CORE-11440 test/Snapshots
Log folder:                  /home/p/VirtualBox VMs/ReOS CORE-11440 test/Logs
Hardware UUID:               981e5981-7416-437e-ad44-382f0b28f3d2
Memory size                  512MB
Page Fusion:                 disabled
VRAM size:                   16MB
CPU exec cap:                100%
HPET:                        disabled
CPUProfile:                  host
Chipset:                     piix3
Firmware:                    BIOS
Number of CPUs:              1
PAE:                         disabled
Long Mode:                   disabled
Triple Fault Reset:          disabled
APIC:                        enabled
X2APIC:                      disabled
Nested VT-x/AMD-V:           disabled
CPUID Portability Level:     0
CPUID overrides:             None
Boot menu mode:              message and menu
Boot Device 1:               DVD
Boot Device 2:               HardDisk
Boot Device 3:               Not Assigned
Boot Device 4:               Not Assigned
ACPI:                        enabled
IOAPIC:                      enabled
BIOS APIC mode:              APIC
Time offset:                 0ms
RTC:                         local time
Hardware Virtualization:     disabled
Nested Paging:               enabled
Large Pages:                 disabled
VT-x VPID:                   enabled
VT-x Unrestricted Exec.:     enabled
Paravirt. Provider:          Default
Effective Paravirt. Prov.:   None
State:                       powered off (since 2021-05-11T21:06:08.000000000)
Graphics Controller:         VBoxVGA
Monitor count:               1
3D Acceleration:             disabled
2D Video Acceleration:       disabled
Teleporter Enabled:          disabled
Teleporter Port:             0
Teleporter Address:          
Teleporter Password:         
Tracing Enabled:             disabled
Allow Tracing to Access VM:  disabled
Tracing Configuration:       
Autostart Enabled:           disabled
Autostart Delay:             0
Default Frontend:            
VM process priority:         default
Storage Controller Name (0):            IDE
Storage Controller Type (0):            PIIX4
Storage Controller Instance Number (0): 0
Storage Controller Max Port Count (0):  2
Storage Controller Port Count (0):      2
Storage Controller Bootable (0):        on
IDE (0, 0): /home/p/VirtualBox VMs/ReOS CORE-11440 test/ReOS CORE-11440 test.vdi (UUID: e8f304db-8ab9-473e-8474-b74b1c515967)
IDE (1, 0): /home/p/Downloads/_ReOS/ReactOS-BootCD.iso (UUID: 3466aee6-bc31-4bbb-98a7-fa75adb83415) (temp eject)
NIC 1:                       MAC: 080027363193, Attachment: NAT, Cable connected: on, Trace: off (file: none), Type: Am79C973, Reported speed: 0 Mbps, Boot priority: 0, Promisc Policy: deny, Bandwidth group: none
NIC 1 Settings:  MTU: 0, Socket (send: 64, receive: 64), TCP Window (send:64, receive: 64)
NIC 2:                       disabled
NIC 3:                       disabled
NIC 4:                       disabled
NIC 5:                       disabled
NIC 6:                       disabled
NIC 7:                       disabled
NIC 8:                       disabled
Pointing Device:             USB Tablet
Keyboard Device:             PS/2 Keyboard
UART 1:                      disabled
UART 2:                      disabled
UART 3:                      disabled
UART 4:                      disabled
LPT 1:                       disabled
LPT 2:                       disabled
Audio:                       enabled (Driver: PulseAudio, Controller: AC97, Codec: STAC9700)
Audio playback:              enabled
Audio capture:               enabled
Clipboard Mode:              disabled
Drag and drop Mode:          disabled
VRDE:                        disabled
OHCI USB:                    enabled
EHCI USB:                    disabled
xHCI USB:                    disabled

USB Device Filters:

<none>

Bandwidth groups:  <none>

Shared folders:<none>

Capturing:                   not active
Capture audio:               not active
Capture screens:             0
Capture file:                /home/p/VirtualBox VMs/ReOS CORE-11440 test/ReOS CORE-11440 test.webm
Capture dimensions:          1024x768
Capture rate:                512kbps
Capture FPS:                 25kbps
Capture options:             

Guest:

Configured memory balloon size: 0MB


Name:            <inaccessible!>
UUID:            0953c108-02fa-434f-b550-79d3af0c9a91
Config file:     /run/media/p/Maxtor/_BACKUPS/_VMs/GNS3 VM/GNS3 VM.vbox
Access error details:

Name:                        ping
Groups:                      /
Guest OS:                    Windows 2003 (32-bit)
UUID:                        6d7ca61d-6bc0-46ff-a119-8eea7a7d517e
Config file:                 /home/p/debug/ping/ping.vbox
Snapshot folder:             /home/p/debug/ping/Snapshots
Log folder:                  /home/p/debug/ping/Logs
Hardware UUID:               6d7ca61d-6bc0-46ff-a119-8eea7a7d517e
Memory size                  512MB
Page Fusion:                 disabled
VRAM size:                   16MB
CPU exec cap:                100%
HPET:                        disabled
CPUProfile:                  host
Chipset:                     piix3
Firmware:                    BIOS
Number of CPUs:              1
PAE:                         disabled
Long Mode:                   disabled
Triple Fault Reset:          disabled
APIC:                        enabled
X2APIC:                      disabled
Nested VT-x/AMD-V:           disabled
CPUID Portability Level:     0
CPUID overrides:             None
Boot menu mode:              message and menu
Boot Device 1:               Floppy
Boot Device 2:               DVD
Boot Device 3:               HardDisk
Boot Device 4:               Not Assigned
ACPI:                        enabled
IOAPIC:                      disabled
BIOS APIC mode:              APIC
Time offset:                 0ms
RTC:                         local time
Hardware Virtualization:     enabled
Nested Paging:               enabled
Large Pages:                 disabled
VT-x VPID:                   enabled
VT-x Unrestricted Exec.:     enabled
Paravirt. Provider:          Default
Effective Paravirt. Prov.:   None
State:                       powered off (since 2021-05-11T21:11:14.000000000)
Graphics Controller:         VBoxVGA
Monitor count:               1
3D Acceleration:             disabled
2D Video Acceleration:       disabled
Teleporter Enabled:          disabled
Teleporter Port:             0
Teleporter Address:          
Teleporter Password:         
Tracing Enabled:             disabled
Allow Tracing to Access VM:  disabled
Tracing Configuration:       
Autostart Enabled:           disabled
Autostart Delay:             0
Default Frontend:            
VM process priority:         default
Storage Controller Name (0):            IDE
Storage Controller Type (0):            PIIX4
Storage Controller Instance Number (0): 0
Storage Controller Max Port Count (0):  2
Storage Controller Port Count (0):      2
Storage Controller Bootable (0):        on
IDE (0, 0): /home/p/debug/ping/ping.vdi (UUID: 4b33289a-6fef-40bf-8442-3598ae057ad3)
IDE (1, 0): /run/media/p/s2volume/2019-06-12 moved/.ISOs/Mageia-6-LiveDVD-Xfce-x86_64-DVD.iso (UUID: fe09e7d1-7e32-496e-bb26-2d800af88dfa)
NIC 1:                       MAC: 0800279F01F1, Attachment: NAT, Cable connected: on, Trace: off (file: none), Type: 82543GC, Reported speed: 0 Mbps, Boot priority: 0, Promisc Policy: deny, Bandwidth group: none
NIC 1 Settings:  MTU: 0, Socket (send: 64, receive: 64), TCP Window (send:64, receive: 64)
NIC 2:                       disabled
NIC 3:                       disabled
NIC 4:                       disabled
NIC 5:                       disabled
NIC 6:                       disabled
NIC 7:                       disabled
NIC 8:                       disabled
Pointing Device:             USB Tablet
Keyboard Device:             PS/2 Keyboard
UART 1:                      disabled
UART 2:                      disabled
UART 3:                      disabled
UART 4:                      disabled
LPT 1:                       disabled
LPT 2:                       disabled
Audio:                       enabled (Driver: PulseAudio, Controller: AC97, Codec: STAC9700)
Audio playback:              enabled
Audio capture:               disabled
Clipboard Mode:              disabled
Drag and drop Mode:          disabled
VRDE:                        disabled
OHCI USB:                    enabled
EHCI USB:                    disabled
xHCI USB:                    disabled

USB Device Filters:

<none>

Bandwidth groups:  <none>

Shared folders:<none>

Capturing:                   not active
Capture audio:               not active
Capture screens:             0
Capture file:                /home/p/debug/ping/ping.webm
Capture dimensions:          1024x768
Capture rate:                512kbps
Capture FPS:                 25kbps
Capture options:             

Guest:

Configured memory balloon size: 0MB


VBoxManage: error: Runtime error opening '/run/media/p/Maxtor/_BACKUPS/_VMs/GNS3 VM/GNS3 VM.vbox' for reading: -102 (File not found.).
VBoxManage: error: /builddir/build/BUILD/VirtualBox-6.1.18/src/VBox/Main/src-server/MachineImpl.cpp[754] (nsresult Machine::i_registeredInit())
VBoxManage: error: Details: code NS_ERROR_FAILURE (0x80004005), component MachineWrap, interface IMachine
```

```
[p@localhost ~]$ VBoxManage startvm ping
Waiting for VM "ping" to power on...
VBoxManage: error: VT-x is disabled in the BIOS for all CPU modes (VERR_VMX_MSR_ALL_VMX_DISABLED)
VBoxManage: error: Details: code NS_ERROR_FAILURE (0x80004005), component ConsoleWrap, interface IConsole
```

CPU itself supports:
```
[p@localhost ~]$ cat /proc/cpuinfo | awk '/flags/ {$1=$2=""; gsub(/ +/, "\n"); print}' | sort -u 

acpi
aes
aperfmperf
apic
arat
arch_perfmon
avx
bts
clflush
cmov
constant_tsc
cx16
cx8
de
ds_cpl
dtes64
dtherm
dts
eagerfpu
epb
ept
est
flexpriority
flush_l1d
fpu
fxsr
ht
ibpb
ibrs
ida
intel_stibp
lahf_lm
lm
mca
mce
md_clear
mmx
monitor
msr
mtrr
nonstop_tsc
nopl
nx
pae
pat
pbe
pcid
pclmulqdq
pdcm
pebs
pge
pln
pni
popcnt
pse
pse36
pts
rdtscp
rep_good
sep
smx
spec_ctrl
ss
ssbd
sse
sse2
sse4_1
sse4_2
ssse3
stibp
syscall
tm
tm2
tpr_shadow
tsc
tsc_deadline_timer
vme
vmx
vnmi
vpid
x2apic
xsave
xsaveopt
xtopology
xtpr
```

Supported virtualization-related flags:
```
[p@localhost ~]$ egrep -wo 'vme|vmx|ept|vpid|npt|tpr_shadow|flexpriority|vnmi|lm|aes' /proc/cpuinfo | sort | uniq 
aes
ept
flexpriority
lm
tpr_shadow
vme
vmx
vnmi
vpid
```

Flags adjusted by BIOS:
```
[p@localhost ~]$ sudo dmidecode -t processor | egrep "($(cat /proc/cpuinfo | awk '/flags/ {$1=$2=""; sub(/^ +/, ""); gsub(" ", "|"); print toupper($0); exit}')) "
		FPU (Floating-point unit on-chip)
		VME (Virtual mode extension)
		DE (Debugging extension)
		PSE (Page size extension)
		TSC (Time stamp counter)
		MSR (Model specific registers)
		PAE (Physical address extension)
		MCE (Machine check exception)
		CX8 (CMPXCHG8 instruction supported)
		APIC (On-chip APIC hardware supported)
		SEP (Fast system call)
		MTRR (Memory type range registers)
		PGE (Page global enable)
		MCA (Machine check architecture)
		CMOV (Conditional move instruction supported)
		PAT (Page attribute table)
		CLFSH (CLFLUSH instruction supported)
		ACPI (ACPI supported)
		MMX (MMX technology supported)
		FXSR (FXSAVE and FXSTOR instructions supported)
		SSE (Streaming SIMD extensions)
		SSE2 (Streaming SIMD extensions 2)
		SS (Self-snoop)
		TM (Thermal monitor supported)
		PBE (Pending break enabled)
```

Virtualization-related flags adjusted by BIOS:
```
[p@localhost 20210517_VBox-scripting]$ sudo dmidecode -t processor | egrep "'$(egrep -wo 'vme|vmx|ept|vpid|npt|tpr_shadow|flexpriority|vnmi|lm|aes' /proc/cpuinfo | sort | uniq | fmt | sed 's/ /|/g' | tr [a-z] [A-Z])'"
		VME (Virtual mode extension)
```

Hence, the guest that the BIOS settings are in play (which doesn't affect the flags read from CPU directly).

After enabling `VT-x` and `VT-d` in the BIOS setup this change occurs in the `dmidecode` output:
```
[p@localhost ~]$ diff -u dmidecode.txt dmidecode_02_after_enabling_VT-x.txt 
--- dmidecode.txt	2021-05-17 15:02:43.540494783 +0300
+++ dmidecode_02_after_enabling_VT-x.txt	2021-05-17 15:22:06.564234651 +0300
@@ -2,7 +2,7 @@
 Getting SMBIOS data from sysfs.
 SMBIOS 2.6 present.
 27 structures occupying 1222 bytes.
-Table at 0xBC79E000.
+Table at 0xBC77E000.
 
 Handle 0x000A, DMI type 0, 24 bytes
 BIOS Information
@@ -354,10 +354,10 @@
 Handle 0x0019, DMI type 131, 64 bytes
 OEM-specific Type
 	Header and Data:
-		83 40 19 00 14 00 00 00 07 00 00 00 00 00 3D 00
+		83 40 19 00 35 00 00 00 07 00 00 00 00 00 3D 00
 		F8 00 4F 1C FF FF FF FF 09 E0 00 00 01 00 07 00
 		1D 04 03 00 00 00 00 00 C8 00 02 15 00 00 00 00
-		04 01 00 00 10 00 00 00 76 50 72 6F 00 00 00 00
+		04 01 00 00 32 00 00 00 76 50 72 6F 00 00 00 00
 
 Handle 0x0015, DMI type 137, 12 bytes
 OEM-specific Type
```

Hence `dmidecode` is not useful in detecting virtualizaton-related BIOS settings. :(

`TODO`: the related BIOS settings tree.

```
[p@localhost ~]$ VBoxManage startvm 981e5981-7416-437e-ad44-382f0b28f3d2
Waiting for VM "981e5981-7416-437e-ad44-382f0b28f3d2" to power on...
VM "981e5981-7416-437e-ad44-382f0b28f3d2" has been successfully started.

[p@localhost ~]$ VBoxManage list vms runningvms
"ping" {6d7ca61d-6bc0-46ff-a119-8eea7a7d517e}

[p@localhost ~]$ VBoxManage controlvm ping poweroff
0%...10%...20%...30%...40%...50%...60%...70%...80%...90%...100%
```
